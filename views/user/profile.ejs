
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternal Chapters: profile</title>
    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
        rel="stylesheet">
    <link rel="stylesheet" href="userDetails.css">
    <link rel="stylesheet" href="userHome.css"/>
    <link rel="stylesheet" href="user/header.css">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon" />


    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>

    <%- include('../../views/partials/user/detailsHeader') %>
    <div class="d-flex "style="height: 100 ">
        <!-- Sidebar -->
        <%- include('../../views/partials/user/detailsSidebar') %>
    
        <!-- Main Content Section (for reference) -->
        <div class="main-content container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="card-body">
                            <!-- Form Title -->
                            <h3 class="text-center mb-4">Your Details</h3>
                            
                            <!-- Form Starts -->
                            <form action="/updateProfile" method="post">
                                <!-- First Name and Last Name -->
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label for="firstName" class="form-label">First Name</label>
                                        <input type="text" class="form-control" name="first_name" value="<%= user.first_name %>" id="firstName" placeholder="Enter your first name">
                                        <% if (validationErrors) { 
                                            const firstNameError = validationErrors.find(err => err.path === 'first_name'); 
                                            if (firstNameError) { %>
                                                <small class="text-danger"><%= firstNameError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="lastName" class="form-label">Last Name</label>
                                        <input type="text" class="form-control" name="last_name" value="<%= user.last_name %>" id="lastName" placeholder="Enter your last name">
                                        <% if (validationErrors) { 
                                            const lastNameError = validationErrors.find(err => err.path === 'last_name'); 
                                            if (lastNameError) { %>
                                                <small class="text-danger"><%= lastNameError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
                                
                                <!-- Date of Birth -->
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label for="dob" class="form-label">Date of Birth</label>
                                        <input type="date" name="date_of_birth" value="<%= user.date_of_birth ? user.date_of_birth.toISOString().slice(0, 10) : '' %>" class="form-control" id="dob">
                                        <% if (validationErrors) { 
                                            const dateError = validationErrors.find(err => err.path === 'date_of_birth'); 
                                            if (dateError) { %>
                                                <small class="text-danger"><%= dateError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" name="email" class="form-control" value="<%= user.email %>" id="email" placeholder="Enter your email">
                                        <% if (validationErrors) { 
                                            const emailError = validationErrors.find(err => err.path === 'email'); 
                                            if (emailError) { %>
                                                <small class="text-danger"><%= emailError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
                                
                                <!-- Update Button -->
                                <div class="d-flex justify-content-center mt-4">
                                    <button type="submit" class="up-bt w-25 rounded-pill">Update</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <!-- footer -->
    <%- include('../../views/partials/user/detailsFooter') %>
    
    

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- sweet alert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <% if (success.length > 0) { %>
        <script>
            Swal.fire({
                title: 'Success!',
                text: '<%= success[0] %>',  // Display the success message
                icon: 'success',
                confirmButtonText: 'OK'
            });
        </script>
    <% } %>

</body>
</html>


