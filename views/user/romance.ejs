<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eternal Chapter</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <link href="styles.css" rel="stylesheet" />
    <!-- Add your custom CSS here -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/userDetails.css" />
    <link rel="stylesheet" href="/userHome.css" />
    <link rel="stylesheet" href="/user/header.css" />

    <link rel="shortcut icon" href="/img/favicon.png" type="image/x-icon" />

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Navbar -->
    <%- include('../../views/partials/user/detailsHeader') %>

    <!-- Hero Section -->
    <div class="container-fluid my-4">
      <div class="row">
        <div class="col b-row">
          <img
            src="/uploads/<%= banner.banner_img %>"
            class="img-fluid b-img"
            alt="Promotional Banner"
          />
        </div>
      </div>
    </div>

    <!-- Best Seller Section -->

    <div class="container">
      <div class="row">
        <!-- Filter Section -->
        <div class="col-md-3 filter-box pt-5">
          <h4 class="mb-3">Filters</h4>
          <form action="/filter" method="GET">

            <!-- Sorting Dropdown -->
            <div class="mb-4">
              <h5 class="fw-bold">Sort By Name</h5>
              <select class="form-select" name="sort" onchange="this.form.submit()">
                  <option value="" selected disabled>Choose sorting order</option>
                  <option value="asc">Alphabetical (A-Z)</option>
                  <option value="desc">Alphabetical (Z-A)</option>
              </select>
            </div>
            <!-- Price Filter -->
            <div class="mb-4">
              <h5 class="fw-bold">Price Range</h5>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="price"
                  id="price1"
                  value="0-500"
                />
                <label class="form-check-label" for="price1">₹0 - ₹500</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="price"
                  id="price2"
                  value="500-1000"
                />
                <label class="form-check-label" for="price2">₹500 - ₹1000</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="price"
                  id="price3"
                  value="1000+"
                />
                <label class="form-check-label" for="price3">₹1000+</label>
              </div>
            </div>
    
            <!-- Author Filter -->
            <div class="mb-4">
              <h5 class="fw-bold">Author</h5>
              <input
                type="text"
                class="form-control"
                name="author"
                placeholder="Search by author"
              />
            </div>
    
            <!-- Stock State Filter -->
            <div class="mb-4">
              <h5 class="fw-bold">Stock State</h5>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="stock_state"
                  id="available"
                  value="Available"
                />
                <label class="form-check-label" for="available">Available</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="stock_state"
                  id="soldout"
                  value="Sold out"
                />
                <label class="form-check-label" for="soldout">Sold out</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="stock_state"
                  id="outofstock"
                  value="Out of stock"
                />
                <label class="form-check-label" for="outofstock">Out of stock</label>
              </div>
            </div>
    
            <!-- Apply Filters Button -->
            <button type="submit" class="btn btn-primary w-100">Apply Filters</button>
          </form>
        </div>
    
        <!-- Product List Section -->
        <div class="col-md-9">
          <h2 class="text-center mb-4 best"><%= name %></h2>
          <div class="row">
            <% products.forEach(product => { %>
            <div class="col-md-3 mb-4">
              <div class="card shadow-sm book">
                <a
                  class="text-decoration-none text-dark"
                  href="/productDetails?id=<%= product._id %>"
                >
                  <img
                    src="/uploads/<%= product.product_imgs[0] %>"
                    class="card-img-top"
                    alt="<%= product.title %>"
                  />
                  <div class="card-body">
                    <h5 class="card-title fw-bold mb-0"><%= product.title %></h5>
                    <p class="text-success fw-bold mb-0">
                      ₹<%= product.price %>.00
                    </p>
                    <p class="text-muted small"><%= product.author_name %></p>
                    <% if (product.stock_state === "Blocked") { %>
                    <p class="text-danger small mb-0">Blocked</p>
                    <% } else if (product.stock_state === "Sold out") { %>
                    <p class="text-danger small mb-0">Sold out</p>
                    <% } else if (product.stock_state === "Out of stock") { %>
                    <p class="text-danger small mb-0">Out of stock</p>
                    <% } else if (product.stock_state === "Unavailable") { %>
                    <p class="text-danger small mb-0">Unavailable</p>
                    <% } else if (product.stock_state === "Available") { %>
                    <p class="text-success small mb-0">Available</p>
                    <% } %>
                  </div>
                </a>
              </div>
            </div>
            <% }) %>
          </div>
        </div>
      </div>
    </div>

    <%- include('../../views/partials/user/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
