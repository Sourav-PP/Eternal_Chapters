<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eternal Chapter</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <link href="styles.css" rel="stylesheet" />
    <!-- Add your custom CSS here -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="userDetails.css"/>
    <link rel="stylesheet" href="userHome.css"/>
    <link rel="stylesheet" href="user/header.css">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Navbar -->
    <%- include('../../views/partials/user/detailsHeader') %>

    <!-- Hero Section -->
    <div class="container-fluid my-4">
      <div class="row">
        <div class="col b-row">
          <img
            src="/uploads/<%= banner.banner_img %>"
            class="img-fluid b-img"
            alt="Promotional Banner"
          />
        </div>
      </div>
    </div>

    <!-- Best Seller Section -->
    <div class="container">
      <h2 class="text-center mb-4 best">BEST SELLER</h2>
      <div class="row">
        <!-- Product Card -->
        <% products.forEach(product=> { %>
        <div class="col-md-3 mb-4">
          <div class="card book">
            <a
              class="text-decoration-none text-dark"
              href="/productDetails?id=<%= product._id %>"
            >
              <img
                src="/uploads/<%= product.product_imgs[0] %>"
                class="card-img-top"
                alt="<%= product.title %>"
              />
              <div class="card-body">
                <h5 class="card-title fw-bold mb-0"><%= product.title %></h5>
                <p class="text-success fw-bold mb-0">
                  â‚¹<%= product.price %>.00
                </p>
                <p class="text-muted small"><%= product.author_name %></p>
                <% if (product.stock_state === "Blocked") { %>
                <p class="text-danger small mb-0">Blocked</p>
                <% } else if (product.stock_state === "Sold out") { %>
                <p class="text-danger small mb-0">Sold out</p>
                <% } else if (product.stock_state === "Out of stock") { %>
                <p class="text-danger small mb-0">Out of stock</p>
                <% } else if (product.stock_state === "Unavailable") { %>
                <p class="text-danger small mb-0">Unavailable</p>
                <% } else if (product.stock_state === "Available") { %>
                <p class="text-success small mb-0">Available</p>
                <% } %>
              </div>
            </a>
          </div>
        </div>
        <% }) %>
      </div>
    </div>

    <%- include('../../views/partials/user/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- sweet alert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <% if (error.length > 0) { %>
        <script>
            Swal.fire({
                title: 'Error!',
                text: '<%= error[0] %>',  // Display the success message
                icon: 'error',
                showConfirmButton: false,
                timer: 1500,
                customClass: {
                    popup: 'my-swal-popup', // Custom class for the popup
                    title: 'my-swal-title', // Custom class for the title
                    content: 'my-swal-content', // Custom class for the content (text)
                    confirmButton: 'my-swal-btn' // Custom class for the button
                },
            });
        </script>
    <% } %>
  </body>
</html>
