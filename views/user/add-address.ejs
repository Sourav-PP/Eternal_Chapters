
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternal Chapters</title>
    <!-- Bootstrap CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
        rel="stylesheet">
    <link rel="stylesheet" href="userDetails.css">
    <link rel="stylesheet" href="user/header.css">


    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>

    <%- include('../../views/partials/user/detailsHeader') %>
    <div class="d-flex "style="height: 100 ">
        <!-- Sidebar -->
        <%- include('../../views/partials/user/detailsSidebar') %>
    
        <!-- Main Content Section (for reference) -->
        <div class="main-content container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-body">
                            <!-- Form Title -->
                            <h3 class="text-center mb-0">Add new Address</h3>
                            <p class="text-center mb-4">Fill in the below details to add new address</p>
                            
                            <!-- Form Starts -->
                            <form action="/addAddress?from=checkout" method="post">
                                <!-- Name and pincode -->
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label for="firstName" class="form-label">Name</label>
                                        <input type="text" class="form-control" name="name" value="<%= formData?.name || '' %>" id="Name" placeholder="Enter your first name">
                                        <% if (validationErrors) { 
                                            const nameError = validationErrors.find(err => err.path === 'name'); 
                                            if (nameError) { %>
                                                <small class="text-danger"><%= nameError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="lastName" class="form-label">Pincode</label>
                                        <input type="text" class="form-control" name="pin_code" value="<%= formData?.pin_code || '' %>" id="pin_code" placeholder="Enter your last name">
                                        <% if (validationErrors) { 
                                            const pinCodeError = validationErrors.find(err => err.path === 'pin_code'); 
                                            if (pinCodeError) { %>
                                                <small class="text-danger"><%= pinCodeError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
                                
                                <!-- City and state -->
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label for="dob" class="form-label">City / District / Town</label>
                                        <input type="text" name="city" value="<%= formData?.city || '' %>" class="form-control" id="dob">
                                        <% if (validationErrors) { 
                                            const cityError = validationErrors.find(err => err.path === 'city'); 
                                            if (cityError) { %>
                                                <small class="text-danger"><%= cityError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">State</label>
                                        <input type="text" class="form-control" name="state" value="<%= formData?.state || '' %>" id="email" placeholder="Enter your email">
                                        <% if (validationErrors) { 
                                            const stateError = validationErrors.find(err => err.path === 'state'); 
                                            if (stateError) { %>
                                                <small class="text-danger"><%= stateError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
 

                                <!--Pincode, address type and Landmark-->
                                <div class="row mb-2">
                                   <div class="col-md-6"> 
                                        <label>Address Type:</label>
                                        <div class="type">
                                        <div>
                                            <input type="radio" id="home" name="address_type" value="home" />
                                            <label for="home">Home</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="work" name="address_type" value="work" />
                                            <label for="work">Work</label>
                                        </div>
                                        </div>
                                        <% if (validationErrors) { 
                                            const addressTypeError = validationErrors.find(err => err.param === 'address_type'); 
                                            if (addressTypeError) { %>
                                                <small class="text-danger"><%= addressTypeError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="pincode" class="form-label">Landmark</label>
                                        <input type="text" class="form-control" name="land_mark" value="<%= formData?.land_mark || '' %>" id="pincode" placeholder="Enter your pincode">
                                        <% if (validationErrors) { 
                                            const landMarkError = validationErrors.find(err => err.path === 'land_mark'); 
                                            if (landMarkError) { %>
                                                <small class="text-danger"><%= landMarkError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
                                
                                <!--mobile number--> 
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label for="mobile" class="form-label">Mobile Number</label>
                                        <input type="tel" class="form-control" name="mobile_number" value="<%= formData?.mobile_number || '' %>" id="mobile" placeholder="Enter your mobile number">
                                        <% if (validationErrors) { 
                                            const mobileError = validationErrors.find(err => err.path === 'mobile_number'); 
                                            if (mobileError) { %>
                                                <small class="text-danger"><%= mobileError.msg %></small>
                                        <% }} %>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="mobile" class="form-label">Alternative Number</label>
                                        <input type="tel" class="form-control" name="alternate_number" value="<%= formData?.alternate_number || '' %>" id="mobile" placeholder="Enter your mobile number">
                                        <% if (validationErrors) { 
                                            const alternateMobileError = validationErrors.find(err => err.path === 'alternate_number'); 
                                            if (alternateMobileError) { %>
                                                <small class="text-danger"><%= alternateMobileError.msg %></small>
                                        <% }} %>
                                    </div>
                                </div>
                                
                                <!--Add Button--> 
                                <div class="d-flex justify-content-center mt-4">
                                        <button type="submit" class="btn-add">Add</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <!-- footer -->
    <%- include('../../views/partials/user/detailsFooter') %>
    
    

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <% if (success && success.length > 0) { %>
    <script>
        
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: '<%= success[0] %>',  // Display the first success message
                showConfirmButton: false,
                timer: 1500,
                customClass: {
                    popup: 'my-swal-popup', // Custom class for the popup
                    title: 'my-swal-title', // Custom class for the title
                    content: 'my-swal-content', // Custom class for the content (text)
                    confirmButton: 'my-swal-btn' // Custom class for the button
                },
            });
        </script>  
        <% } %>
    
        <% if (error && error.length > 0) { %>
            <script>
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: '<%= error[0] %>',  // Display the first error message
                showConfirmButton: true,
                customClass: {
                    popup: 'my-swal-popup', // Custom class for the popup
                    title: 'my-swal-title', // Custom class for the title
                    content: 'my-swal-content', // Custom class for the content (text)
                    confirmButton: 'my-swal-btn' // Custom class for the button
                },
            });
        </script>
        <% } %>
    
</body>
</html>


